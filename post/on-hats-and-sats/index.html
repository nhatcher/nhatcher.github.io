<!doctype html><html lang=en data-theme><head>
<title> Nicolás Hatcher | The Hat, the Spectre and SAT solvers </title><meta charset=utf-8><meta name=generator content="Hugo 0.103.1"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="Software developer by trade, physicist by soul">
<link rel=stylesheet href=https://www.nhatcher.com/css/style.min.0c643de4008adca329f7a2d616ce308cca99d4ef45e4cca307323e7857910194.css integrity="sha256-DGQ95ACK3KMp96LWFs4wjMqZ1O9F5MyjBzI+eFeRAZQ=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=https://www.nhatcher.com/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous>
<link rel="shortcut icon" href=https://www.nhatcher.com/favicons/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon sizes=180x180 href=https://www.nhatcher.com/favicons/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.nhatcher.com/favicons/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://www.nhatcher.com/favicons/favicon-16x16.png>
<link rel=canonical href=https://www.nhatcher.com/post/on-hats-and-sats/>
<script type=text/javascript src=https://www.nhatcher.com/js/anatole-header.min.df804b63b5bd8474ea0756ea874bc8f1e92552708cc6ea43aa0d76981dc419f9.js integrity="sha256-34BLY7W9hHTqB1bqh0vI8eklUnCMxupDqg12mB3EGfk=" crossorigin=anonymous></script>
<script type=text/javascript src=https://www.nhatcher.com/js/anatole-theme-switcher.min.3829579c725749492568b0e6fa9da3012a7fc37fd291b4fd79e33c1df5d8a34a.js integrity="sha256-OClXnHJXSUklaLDm+p2jASp/w3/SkbT9eeM8HfXYo0o=" crossorigin=anonymous></script>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="The Hat, the Spectre and SAT solvers">
<meta name=twitter:description content="Introduction In this blog post you are going to read about two things:">
</head><body><div class="sidebar .">
<div class=logo-title>
<div class=title>
<img src=https://www.nhatcher.com/images/profile.jpg alt="profile picture">
<h3 title><a href=/>I'm Nicolás Hatcher</a></h3><div class=description>
<p>Software developer by trade, physicist by soul</p></div></div></div><ul class=social-links>
<li>
<a href="https://arxiv.org/search/?searchtype=author&query=Hatcher%2C+N" rel=me aria-label=Publications>
<i class="fas fa-file-alt fa-2x" aria-hidden=true></i>
</a>
</li><li>
<a href=https://github.com/nhatcher/ rel=me aria-label=GitHub>
<i class="fab fa-github fa-2x" aria-hidden=true></i>
</a>
</li><li>
<a href=https://www.instagram.com/theuniverse.today rel=me aria-label=instagram>
<i class="fab fa-instagram fa-2x" aria-hidden=true></i>
</a>
</li><li>
<a href=mailto:nicolas@theuniverse.today rel=me aria-label=e-mail>
<i class="fas fa-envelope fa-2x" aria-hidden=true></i>
</a>
</li></ul><div class=footer>
<div class=by_farbox>&copy; Nicolás Hatcher 2024 </div></div></div><div class=main>
<div class="page-top .">
<a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
<ul class=nav id=navMenu>
<li><a href=/ title>Home</a></li><li><a href=/post/ title>Posts</a></li><li><a href=/about/ title>About</a></li><li class=theme-switch-item>
<a class=theme-switch title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a>
</li></ul></div><div class=autopagerize_page_element>
<div class=content>
<div class="post .">
<div class=post-content>
<div class=post-title>
<h3>The Hat, the Spectre and SAT solvers</h3><div class=info>
<em class="fas fa-calendar-day"></em>
<span class=date> Sat, Jan 27, 2024
</span>
<em class="fas fa-stopwatch"></em>
<span class=reading-time>14-minute read</span>
</div></div><h1 id=introduction>Introduction</h1><p>In this blog post you are going to read about two things:</p><ul>
<li>A new flashy discovery in mathematics: aperiodic tilings of the plane with a single monotile</li><li>SAT solvers. A family of not so well known algorithms in computer science</li></ul><p>Hopefully by the end of the post you will know a fair amount about the hat, the turtle and the spectres and have another powerful tool under your belt, SAT solvers.</p><p>Thus, you can see this post either as an exercise in recreational mathematics or as an invitation to SAT solvers.</p><p>The post is organized as follows. We first introduce the Hat and state the main result. Then we define what SAT solvers are. In section 3 we describe how we use the solver in wasm and apply it to the problem of solving a Sudoku problem as a warm up exercise in the next section. In section 5 we explain Craig Kaplan&rsquo;s idea of how to use SAT solvers to tile finite regions of the plane and apply it to the Hat. Section 6 introduces the Turtle, a second monotile capable of tiling the plane aperiodically. With all those constructions we build the Spectre, from deformations of Hats and Turtles, a true chiral aperiodic monotile. In the last section we explain how to use the aap deployed at <a href=https://www.nhatcher.com/hats/>https://www.nhatcher.com/hats/</a></p><h1 id=code>Code</h1><p>You can find all the code discussed here in <a href=https://github.com/nhatcher/hats>GitHub</a>.</p><p>There is an app you can play along with at:</p><p><a href=https://www.nhatcher.com/hats/>https://www.nhatcher.com/hats/</a></p><p>The sudoku solver mentioned below is deployed at:</p><p><a href=https://www.nhatcher.com/hats/sudoku.html>https://www.nhatcher.com/hats/sudoku.html</a></p><p>A small app solving general SAT problems in the browser:</p><p><a href=https://www.nhatcher.com/hats/sat.html>https://www.nhatcher.com/hats/sat.html</a></p><p>I used the fantastic <a href=https://github.com/shnarazk/splr>dplr</a> SAT Solver by <a href=https://github.com/shnarazk>Shuji Narazaki</a> and adapted it to wasm in:</p><p><a href=https://github.com/nhatcher/splr-wasm>https://github.com/nhatcher/splr-wasm</a></p><h1 id=1-the-hat-a-shape-perplexing-the-world>1. The Hat: a shape perplexing the world</h1><p>It is quite unusual that a discovery in mathematics is understandable by the general public, but 2023 witnessed precisely that.</p><p>In November of 2022 just as ChatGPT was going to take world by a storm, <a href=https://en.wikipedia.org/wiki/David_Smith_(amateur_mathematician)>David Smith</a> a retired printer technician and amateur mathematician found a shape:</p><p><img src=/images/hats/hat.png alt="the hat" title="The Hat"></p><p>Thats is able to <em>tile</em> the whole infinite plane in a non periodic way:</p><p><img src=/images/hats/simple-tilling.png alt=tilling title="simple tilling"></p><p>The announcement was made in a <a href=https://arxiv.org/abs/2303.10798>paper</a> but you might have heard of it in any of your favorite channels like <a href="https://www.youtube.com/watch?v=48sCx-wBs34">veritasium</a>, <a href="https://www.youtube.com/watch?v=_ZS3Oqg1AX0">numberphile</a>,
<a href=https://www.quantamagazine.org/hobbyist-finds-maths-elusive-einstein-tile-20230404/>quanta magazine</a> or even the
<a href=https://www.nytimes.com/2023/03/28/science/mathematics-tiling-einstein.html>New York Times</a>.</p><p>The story of non periodic tilings of the plane is somewhat old and was popularized by Sir Roger Penrose and Martin Gadner in his famous Scientific American column on recreational mathematics. For example Penrose found <a href=https://en.wikipedia.org/wiki/Penrose_tiling>two tiles</a> (the dart and the kite) that were able to tile the plane in a non periodic way.</p><p>In this blog post I will write a bit about these new tilings of the plane and how to cover finite regions using an algorithm that not many people, even people in the industry, know: a SAT solver.</p><h1 id=2-the-sat-solver-an-underappreciated-tool>2. The SAT solver, an underappreciated tool.</h1><p>A <a href=https://en.wikipedia.org/wiki/SAT_solver>SATisfiability solver</a> is a computer program that solves problems in boolean algebra. Say you have a number of variables <code>a</code>, <code>b</code>, <code>c</code> , <code>d</code>, &mldr; that can be either <strong>true</strong> or <strong>false</strong>. And then you have a series of statements regarding those variables, like:</p><ul>
<li>If <code>a</code> is <strong>true</strong> then either <code>b</code> is <strong>true</strong> or <code>c</code> is <strong>false</strong>.</li><li>If <code>a</code> and <code>b</code> are both <strong>true</strong> if and only if <code>d</code> or <code>c</code> is false.</li></ul><p>Solvers can deal with problems with a lot of variables. We will run some experiments in your browser with more than 60 thousand variables and millions of statements.</p><p>To be able to use the solver we first need to convert all of our logic statements in what is called a <strong><a href=https://en.wikipedia.org/wiki/Conjunctive_normal_form>conjunctive normal form</a></strong> (CNF). We don&rsquo;t really need to explain much in here because as it happens the statements that we will produce are exactly in this form already.</p><p>In <em>conjunctive normal form</em> we have a series of statements, called <em>clauses</em>, that all need to be true (those are the conjunction or AND blocks). Each clause is composed of an OR array of literals (variables and their negations). For example:</p><ul>
<li>a or b or not c</li><li>a or d</li><li>not c or d</li></ul><p>This is composed of 3 clauses and there are 4 variables (a, b, c , d).</p><p>There is a general constructive theorem called the <em>Tseitin transformation</em> that converts any problem in boolean logic to an equivalent in CNF.</p><p>As I said, in our case the problem will already be in CNF so we don&rsquo;t need to bother about that. The next step will be to write the problem in a way a Solver can digest it. The standard way is to assign a positive to each variable. For instance</p><ul>
<li>a -> 1</li><li>b -> 2</li><li>c -> 3</li><li>d -> 4</li></ul><p>The each clause is an array:</p><ul>
<li>a or b or not c &lt;=> [1, 2, -3]</li></ul><p>As a you can see a negative value means negation of the variable.</p><p>Once you feed the solver an array of arrays it returns an array like [1, -2, 3, -4] that means variable 1 and 3 are true and variables 2 and 4 are false. The solver might not find a solution and will return an error or might be able to prove that there is not a valid a solution and will return &ldquo;UNSAT&rdquo;.</p><h1 id=3-a-sat-solver-in-wasm>3. A SAT Solver in wasm</h1><p>There are a million SAT solvers out there but we will use <a href=https://github.com/shnarazk/splr>splr</a> that we can compile to <a href=https://github.com/nhatcher/splr-wasm>WASM</a>, fits into a 200kB file and runs in the <a href=https://www.nhatcher.com/hats/sat.html>browser</a>.</p><p>Since we are communicating with wasm instead of passing an array of arrays to the solver we will pass just one array from which you can rebuild the array of arrays:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[(length, a_1, ..., a_l)*]
</span></span></code></pre></div><p>So, for instance the array of arrays:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[
</span></span><span class=line><span class=cl>    [5, -4, 7],
</span></span><span class=line><span class=cl>    [3, -5, 89, 3]
</span></span><span class=line><span class=cl>]
</span></span></code></pre></div><p>Will be converted to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>array</span> <span class=o>=</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=o>-</span><span class=mi>5</span><span class=p>,</span> <span class=mi>89</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span></code></pre></div><p>Once you have the array you pass it to the splr solver by</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>solveSat</span><span class=p>(</span><span class=nx>array</span><span class=p>));</span>
</span></span></code></pre></div><p>The <code>result</code> will either be successful and contain a <code>data</code> array or fail and have a <code>details</code> message. If it succeeds the <code>result.data</code> will be an array with all the numbers of the variables being either positive (meaning they are true) or negative (meaning they are false).</p><p>To sum up if you want to solve a problem in boolean logic you need:</p><ul>
<li>Step 1: Convert the problem to a CNF</li><li>Step 2: Number all variables</li><li>Step 3: Create the array of array of clauses</li><li>Step 4: Convert them to a single array and feed it to <code>solveSat</code></li><li>Step 5: Read the output from <code>result.data</code></li><li>Step 6: Convert each of the indices to variables</li></ul><h1 id=4-intermezzo-using-a-sat-solver-to-solve-sudokus>4. Intermezzo: Using a SAT solver to solve Sudokus</h1><p>Instead of jumping right at the main issue let&rsquo;s use the algorithm to solve a <em>different</em> problem.</p><p>Let&rsquo;s solve a <a href=https://en.wikipedia.org/wiki/Sudoku>sudoku</a>:</p><p><img src=/images/hats/sudoku_wikipedia.svg alt=sudoku title="A sudoku board"></p><p>There are 81 squares on a sudoku board and any number from 1 to 9 can be in any of those squares.</p><p>Our variables are:</p><ul>
<li>The is a number <code>n</code> in square (row, column)</li></ul><p>where n in [1, .., 9] and row, column in [0, .., 8]</p><p>There are 9x9x9 = 729 variables in total and only 81 of them can be true.
We need to index each variable, so the previous statement (&ldquo;There is an n in square (row, column)&rdquo;) is the variable number:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>index = row*9*9+column*9+n
</span></span></code></pre></div><p>We also need a way to get (row, column) and n from the index:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fromIndexToCell</span> <span class=o>=</span> <span class=p>(</span><span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>row</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>((</span><span class=nx>index</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>81</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>column</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>((</span><span class=nx>index</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>-</span> <span class=nx>row</span> <span class=o>*</span> <span class=mi>81</span><span class=p>)</span> <span class=o>/</span> <span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>n</span> <span class=o>=</span> <span class=nx>index</span> <span class=o>-</span> <span class=nx>row</span> <span class=o>*</span> <span class=mi>81</span> <span class=o>-</span> <span class=nx>column</span> <span class=o>*</span> <span class=mi>9</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span> <span class=nx>row</span><span class=p>,</span> <span class=nx>column</span><span class=p>,</span> <span class=nx>n</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now we need to create all the clauses. For instance, One of the following must be true</p><ul>
<li>number 1 is in (row=0, column=0)</li><li>number 1 is in (row=0, column=1)
&mldr;</li><li>number 1 is in (row=0, column=8)
That&rsquo;s one clause. We have 9 of those, one for each number <code>n</code>. But of course we have 9 rows. So we have 81 of those.</li></ul><p>We can do the same in columns, so we have 81 clauses for columns.</p><p>We should do that again for every 3x3 block, another 81 clauses.</p><p>That&rsquo;s 81x3=243 clauses.</p><p>We still need more clauses. One solution of all the previous clauses is make all of them true.</p><p>On each square there can only be a number. For instance:</p><ul>
<li>NOT(number 1 is in (row=3, column=4))</li><li>NOT(number 2 is in (row=3, column=4))</li></ul><p>For each spot there are (9x8)/2=36 clauses (combinations of 9 elements taken 2 by 2, order is not important).
There are 81 spots so that is a total of 81x36=2916 clauses of this kind for a grand total of:</p><p>2916 + 243 = 3159</p><p>Clauses. That is, of course for an empty sudoku board. We will need to add the known numbers. In the diagram above:</p><ul>
<li>There is a 5 in position (row=0, column=0)
&mldr;</li><li>There is a 9 in position (row=8, column=8)</li></ul><p>That is 30 more clauses for that particular puzzle. For a general sudoku with a single solution it is known that you need at least 17 hints.</p><p>If you want to see the details look at the <a href=https://github.com/nhatcher/hats/blob/main/sudoku.js>source code</a> to see how you can generate all those in just a few lines of simple code.</p><p>Now, using a SAT solver to find solutions to sudokus might not be the most performant algorithm. Also the most important bit is how you <em>generate</em> solutions. I enjoyed reading this <a href=https://eli.thegreenplace.net/2022/sudoku-go-and-webassembly/>piece</a> from the beautiful blog of Eli Bendersky.</p><h1 id=5-using-a-sat-solver-to-find-solutions-to-the-tiling-problem>5. Using a SAT solver to find solutions to the tiling problem</h1><p>In his book &ldquo;The Art of Computer Programming&rdquo; in volume 4B Donald Knuth proposes as an (easy) exercise to the reader to find solutions to <em>tatami tilings</em> using a SAT solver.</p><p>Besides that, it was Craig Kaplan&rsquo;s paper of the <a href=https://arxiv.org/abs/2105.09438>Heesch Numbers of Unmarked Polyforms</a> that used SAT solvers extensively to solve tiling problems (see also his <a href=https://isohedral.ca/heesch-numbers-of-unmarked-polyforms>blog post</a>)</p><p>Given a shape (like the Hat above) or a plolyomio below:</p><p><img src=/images/hats/Fontaine.svg alt=Fontaine title="Fontaine Polyomio"></p><p>The <a href=https://en.wikipedia.org/wiki/Heesch%27s_problem>Heesch number</a> is the number of times you can surround
the original shape with copies of it without gaps or overlaps. For instance the <a href=https://core.ac.uk/reader/82160310>Fontaine polyomino</a></p><p><img src=/images/hats/Fontaine_heesch_2.svg alt="Fontaine Heesch" title="Fountaine Heesch">
(credit wikipedia)</p><p>A <a href=https://en.wikipedia.org/wiki/Polyomino>polyomino</a> is a shape that is made from squares of the same size (like tetris figures or <em>tetraminoes</em>). When you are trying to tile the plane with polyominos the vertices can only be on a square grid. This converts the tiling problem of a finite part of the plane into a combinatorial problem and from there Kaplan was able to produce a set of clauses for a SAT solver.</p><p>The particular shape that David Smith found, the Hat, is not a polyomino but one of it&rsquo;s vertices must be in the center of an hexagon of a regular hexagonal grid:</p><p><img src=/images/hats/hat-marked.png alt="the marked hat" title="The marked Hat"></p><p>You can go ahead and play with it at the <a href=https://www.nhatcher.com/hats/>app</a>.</p><p>Note also a very important fact of the Hat. In it composed of a series of 8 &ldquo;kites&rdquo;:</p><p><img src=/images/hats/hat_with_kites.svg alt="the hat with kites" title="The Hat with Kites"></p><p>Much like a polyomino is a <a href=https://en.wikipedia.org/wiki/Polyform>polyform</a> of squares, the Hat is a polyform of <a href=https://en.wikipedia.org/wiki/Kite_(geometry)>kites</a>. This fact will be extremely useful for us.</p><p>You can rotate the shape and all the vertices of the Hat will still be on the grid. There are in total 6 possible rotations. But you can also have the mirror image of the Hat (the anti-Hat), in the app just press the space bar to get an anti-Hat. In each center of an hexagon you can have any of the 12 possibilities:</p><ul>
<li>Any of the 6 rotations of the Hat</li><li>Any of the 6 rotations of the anti-Hat</li></ul><p>In a grid of <code>M</code> columns and N rows we have <code>12×M×N</code> variables:</p><ul>
<li>There is Hat (or an anti-Hat) in vertex (m, n) with rotation <code>60×i</code> (with i=0,..,5)</li></ul><p>If we solve for all those variables, i.e. if we decide which of those statements are true and which are false we will find a tiling of the <code>N×M</code> rectangle with Hats and anti-Hats.</p><p>All we need to transform this problem into a something a SAT solver can use is to find a set of clauses.</p><p>The clauses are:</p><ul>
<li>There cannot be two tiles in the same location</li><li>Two tiles cannot collide</li><li>Every kite must be occupied</li></ul><p>None of those are difficult to build in terms of our variables but some require a bit of geometry.</p><p>For a different take on the same problem see <a href=https://www.hgreer.com/HatTile/>Hastings Greer&rsquo;s post</a> using Microsoft&rsquo;s <a href=https://github.com/Z3Prover/z3>z3 theorem prover</a>.</p><h1 id=6-its-turtles-all-the-way-down>6. It&rsquo;s turtles all the way down</h1><p>A little after finding the Hat, David Smith found another shape:</p><p><img src=/images/hats/turtle.png alt="the turtle" title="The Turtle"></p><p>This is called &ldquo;the Turtle&rdquo; and it is very similar to the Hat. It also tiles the whole plane in an aperiodic way. All the technology we applied to the Hat, works here as well.</p><p>They soon realized that the Hat and the Turtle are all shapes from the same family.</p><p>Take a Hat. There are two kinds of sides, some of length <code>a</code>, the short ones and some of length <code>b=a*√3</code>. there is one side that is <code>2xa</code>, we will count that as two sides of length <code>a</code>. Now mentally remove the grid behind it and, while preserving the angles, change the length <code>a</code> and <code>b</code>. All the tiles that you generate that way will also tile the whole plane. They call those tiles <code>Tile(a, b)</code>. In this way <code>Tile(1, √3)</code> is the Hat and <code>Tile(√3, 1)</code> is the Turtle.</p><p>Both Hats and Turtles are polykites, but that is not true for other members in the family. What is even more interesting, you can combine Hats and Turtles to tile the plane.</p><p>This last fact would prove fundamental for our next step.</p><p>You can play in the <a href=https://www.nhatcher.com/hats/>app</a> with Hats, anti-Hats, Turtles and anti-Turtles, color them differently, and using the SAT solver to create interesting patterns.</p><h1 id=7-the-spectre>7. The spectre</h1><p>Here is where things get a little bit more involved, the Hat, or the Turtle by themselves do not tile the whole plane. you also need the anti-Hat or the anti-Turtle. Some people felt that that is not really a solution to the <a href=https://en.wikipedia.org/wiki/Einstein_problem>einstein problem</a>.</p><p>The authors of the Hat realized in a <a href=https://arxiv.org/abs/2305.17743>subsequent paper</a> that one member of the family, the <code>Tile(1, 1)</code> does tile the whole plane in an aperiodic way without the need of an <code>anti-Tile(1, 1)</code>. The tile, and it&rsquo;s variations were christened the Spectre (technically they call it Tile(1, 1) and call Spectres some variations of it, for us Tile(1, 1) will be the Spectre.):</p><p><img src=/images/hats/spectre.png alt="the spectre" title="The Spectre"></p><p>The Spectre, however, does not share the nice properties of it&rsquo;s siblings the Hat and the Turtle:</p><ul>
<li>It does not live in an hexagonal grid</li><li>It is not made out of kites (It is actually not a polyform)</li></ul><p>We can&rsquo;t really apply a SAT solver directly to this tile. The great insight of the exceptional team is <a href=https://arxiv.org/abs/2305.17743>Theorem 3.1 in the paper</a>:</p><p><strong>Theorem 3.1.</strong> (David Smith, Joseph Samuel Myers, Craig S. Kaplan and Chaim Goodman-Strauss)</p><pre><code>There is a bijection between combinatorially equivalent tilings by Tile(1, 1) and
by the set {hat, turtle}, such that a Tile(1, 1) tiling has a translation as a symmetry if and only
if the corresponding hat-turtle tiling has a corresponding translation, and the Tile(1, 1) tiling
includes a reflected tile if and only if the hat-turtle tiling does.
</code></pre><p>If you are not mathematically oriented don&rsquo;t run just yet. This is a fairly easy to understand statement once we distill it into common English. If I start with a Hat and change the length of it&rsquo;s sides until they are all the same I will get the Spectre. The inverse transformation, that is starting with the Tile(1, 1) you can change the length of some of the sides and get either a Hat, an anti-Hat, a Turtle or an anti-Turtle. That&rsquo;s all that theorem is saying. The only tricky bit is to know what sides to change. Note that the tiles have edges that are parallel in pairs. The team called some even and some odd depending on the initial rotation of the spectre, then change the even and odd lengths differently.</p><p><img src=/images/hats/paper.png alt=paper title="Deformations of hats and turtles">
(from &ldquo;A chiral aperiodic monotile&rdquo;)</p><p>There is not better way to see that than through direct manipulation on the <a href=https://www.nhatcher.com/hats/>app</a></p><p>If you start with a <a href=https://en.wikipedia.org/wiki/Tessellation>tessellation</a> of Hats and Turtles alone (no anti-Hats and no anti-Turtles) and you change the side of the edges to be the same you will end up with only Spectres (and no anti-Spectres!). That&rsquo;s the Einstein, that is the monotile. They got it!</p><p>They went even a little bit further. It turns out that the Spectre and the anti-Spectre also tile the plane but they can do it in a periodic way. Although I won&rsquo;t go into the details here, modifying the shape of the sides in a symmetrical way will get you shapes that tile the plane only in non periodic ways and you can&rsquo;t use the anti-Shape.</p><h1 id=8-using-the-hats-app>8. Using the Hats app</h1><p>TODO</p><h1 id=9-references>9. References</h1><p><a href=https://www.quantamagazine.org/math-that-goes-on-forever-but-never-repeats-20230523/>quanta magazine</a></p><p>Original sources:
<a href=https://cs.uwaterloo.ca/~csk/hat/>An aperiodic monotile</a>
<a href=https://arxiv.org/abs/2305.17743>A chiral aperiodic monotile</a></p><p><a href=https://www.borealisai.com/research-blogs/tutorial-9-sat-solvers-i-introduction-and-applications/>borealis tutorial</a></p><p>Applications:</p><p>Craig Kaplan:
<a href=https://cs.uwaterloo.ca/~csk/hat/app.html>patches of hats</a>
<a href=https://cs.uwaterloo.ca/~csk/hat/h7h8.html>H7/H8 substitution rules</a>
<a href=https://github.com/isohedral/hatviz>GitHub</a></p><p><a href=https://mathigon.org/polypad/8kVqVH2Mor6JTQ>Mathigon polypad</a></p><p>SAT Solver online:
<a href=https://msoos.github.io/cryptominisat_web/>cryptominisat</a>
<a href=https://github.com/msoos/cryptominisat>GitHub</a></p><p>Craig S. Kaplan uses this solver (Heesch Numbers of Unmarked Polyforms):
<a href=https://isohedral.ca/heesch-numbers-of-unmarked-polyforms/>blog post</a>
<a href=https://arxiv.org/pdf/2105.09438.pdf>paper</a></p></div><div class=post-footer>
<div class=info>
</div></div><div id=fb_comments_container>
<h2>comments</h2><script src=https://utteranc.es/client.js repo=nhatcher/nhatcher.github.io issue-term=pathname theme=preferred-color-scheme crossorigin=anonymous async></script>
</div></div></div></div></div><script type=text/javascript src=https://www.nhatcher.com/js/jquery.min.decb4e8fdab5cb7b76ec6470b6fb73d30c7ee8e248d7486f49007f3c525b7acb.js integrity="sha256-3stOj9q1y3t27GRwtvtz0wx+6OJI10hvSQB/PFJbess=" crossorigin=anonymous></script>
<script type=text/javascript src=https://www.nhatcher.com/js/bundle.min.3ebad6bf39b2e7c2f899d3ed9bc97e8c0c1ead7a1b57472e3387321f673b8077.js integrity="sha256-PrrWvzmy58L4mdPtm8l+jAwerXobV0cuM4cyH2c7gHc=" crossorigin=anonymous></script>
<script type=text/javascript src=https://www.nhatcher.com/js/medium-zoom.min.e1c6918cbaa90022a5612f0bd71c7bf3be6d036614c5729cebfe14f7b91fa4bc.js integrity="sha256-4caRjLqpACKlYS8L1xx7875tA2YUxXKc6/4U97kfpLw=" crossorigin=anonymous></script>
</body></html>